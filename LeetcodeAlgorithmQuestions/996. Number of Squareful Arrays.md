# Solution1: Brute Force (Time Limit Exceeded)

Based on the requirement of the question, a straightforward way to solve it is to solve it within 2 simple steps:  
1. Generate all possible permutation of the input array. (Generate all possible permutations is the same to Permutations II).  
2. Check each of the permutation to see if it is a "squareful" permutation.  

## Time complexity

`O(n! * n)`. `O(n!)` possible permutations, `O(n)` time for each to check if it is "squareful". `n` is the length of the input array.  

## Space complexity

`O(n!+n) = O(n!)` for storing all possible permutations. `O(n)` for the boolean array used for helping generating all permutations. 

```java
class Solution {
    public int numSquarefulPerms(int[] A) {
        List<List<Integer>> permutations = new ArrayList<>();
        Arrays.sort(A);
        boolean[] used = new boolean[A.length];
        getPermutations(A, permutations, used, new ArrayList<Integer>());
        
        int count = 0;
        for (List<Integer> ele : permutations) {
            if (isSquareful(ele)) {
                count++;
            }
        }
        
        return count;
    }
    
    private void getPermutations(int[] arr, List<List<Integer>> ret, boolean[] used, List<Integer> curr) {
        if (curr.size() == arr.length) {
            ret.add(new ArrayList<>(curr));
        }
        
        for (int i = 0; i < arr.length; i++) {
            if (!used[i]) {
                if (i > 0 && arr[i] == arr[i - 1] && used[i - 1]) continue;
                curr.add(arr[i]);
                used[i] = true;
                getPermutations(arr, ret, used, curr);
                curr.remove(curr.size() - 1);
                used[i] = false;
            }
        }
    }
    
    private boolean isSquareful(List<Integer> ele) {
        for (int i = 0; i < ele.size() - 1; i++) {
            int sum = ele.get(i) + ele.get(i + 1);
            double sr = Math.sqrt(sum);
            if (sr - Math.floor(sr) != 0) return false;
        }
        
        return true;
    }
}
```
